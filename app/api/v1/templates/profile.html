{% extends "base.html" %}
{% block title %}User Profile{% endblock %}
{% block links %}
    <link rel="stylesheet" href="../static/styles/profile.css">
    <link rel="stylesheet" href="../static/styles/dashboard.css">
{% endblock %}
{% block menu %}
<ul class="menu">
    <li>
        <a href="/user/dashboard">
            <i class="fas fa-tachometer-alt"></i>
            <span>Dashboard</span>
        </a>
    </li>
    <li class="active">
        <a href="/user/profile">
            <i class="fas fa-user"></i>
            <span>Profile</span>
        </a>
    </li>
    <li>
        <a href="/contributions">
            <i class="fas fa-piggy-bank"></i>
            <span>Contributions</span>
        </a>
    </li>
    <li>
        <a href="/loans">
            <i class="fas fa-hand-holding-usd"></i>
            <span>Loans</span>
        </a>
    </li>
    <li>
        <a href="#">
            <i class="fas fa-phone-alt"></i>
            <span>Contact Us</span>
        </a>
    </li>
    <li>
        <a href="#">
            <i class="fas fa-cog"></i>
            <span>Settings</span>
        </a>
    </li>
    <li class="logout">
        <a href="/user/logout">
            <i class="fas fa-sign-out-alt"></i>
            <span>Logout</span>
        </a>
    </li>
</ul>
{% endblock %} 
{% block content %}
    <div class="profile">
        <section class="head photo-info">
        {% with messages = get_flashed_messages() %}
            {% if messages %}
              <ul class="flash-messages">
                {% for message in messages %}
                  <p class="{{ message[1] }}">{{ message }}</p>
                {% endfor %}
              </ul>
            {% endif %}
          {% endwith %}
            <form method="POST" action="/user/upload-photo" enctype="multipart/form-data">
                <div class="column-pics">
                    <div>
                        {% if filename %}
                            <img src="{{ url_for('static', filename='images/users/' ~ filename) }}" alt="Profile Image">
                        {% else %}
                            <p>Upload a profile picture</p>
                        {% endif %}
                    </div>
                </div>
                <div class="upload-wrap">
                <div class="column-pics">
                    <input type="file" id="photo" name="photo">
                </div>
                <div class="upload">
                    <button type="submit">Update</button>
                </div>
                </div>
            </form>
        </section>
        <section class="head basic-info">
            <h3>Basic Information</h3>
            <div class="column-1">
                <div class="info firstname">
                    <label for="firstname">First Name:</label>
                    <p>{{ profile_data.firstname }}</p>
                </div>
                <div class="info lastname">
                    <label for="lastname">Last Name:</label>
                    <p>{{ profile_data.lastname }}</p>
                </div>
                <div class='info middle_name'>
                    <label for="middle_name">Middle Name:</label>
                    <input type="text" id="middle_name" name="middle_name" value={{ profile_data.middle_name }} required>
                </div>
                <div class="info birth_date">
                    <label for="birth_date">Birth Date:</label>
                    <input type="text" id="birth_date" name="birth_date" value={{ profile_data.birth_date }} required>
                </div>
            </div>
            <div class="update-btn">
                <button action="/user/upload-photo">Update</button>
            </div> 
        </section>
        <section class="head contact-info">
            <h3>Contact Information</h3>
            <div class="column-2">
                <div class='info email'>
                    <label for="email">Email:</label>
                    <p>{{ profile_data.email }}</p>
                </div>
                <div class="info phonenumber">
                    <label for="phonenumber">Phone Number:</label>
                    <p>{{ profile_data.phonenumber }}</p>
                </div>
                <div class="info address">
                    <label for="address">Address:</label>
                    <input type="text" id="address" name="address" value={{ profile_data.address }} required>
                </div>
            </div>
            <div class="update-btn">
                <button action="/user/upload-contact">Update</button>
            </div> 
        </section>
        <section class="head employment_info">
            <h3>Employment Information</h3>
            <div class="column-3">
                <div class="info employment_status">
                    <label for="employment_status">Employment Status:</label>
                    <input type="text" id="employment_status" name="employment_status" value={{ profile_data.employment_status }} required>
                </div>
            </div>
            <div class="update-btn">
                <button action="/user/upload-employment-info">Update</button>
            </div> 
        </section>
    </div>
    <script src="../static/js/flash-timeout.js"></script>
{% endblock %}
